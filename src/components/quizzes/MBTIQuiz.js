// src/components/quizzes/MBTIQuiz.js
import { createQuiz } from './utils.js';

export const MBTIQuiz = createQuiz({
  id: 'mbti-quiz',
  title: "초간단 MBTI 테스트",
  subtitle: "10분만에 알아보는 나의 성격 유형",
  mainCharacter: "🦊",
  category: "",  // 수험생 카테고리
  isPopular: true,  // 필요에 따라 true로 설정

  resultType: 'complex',
  
  questions: [
    {
      id: 1,
      text: "파티에서 나는 주로?",
      options: [
        { text: "많은 사람들과 대화하며 에너지가 충전된다.", value: "E" },
        { text: "소수의 친한 사람들과 조용히 대화하는 것을 선호한다.", value: "I" }
      ]
    },
    {
      id: 2,
      text: "새로운 환경에 적응할 때 나는?",
      options: [
        { text: "적극적으로 사람들과 어울리며 빠르게 적응한다.", value: "E" },
        { text: "천천히 관찰하면서 신중하게 적응해간다.", value: "I" }
      ]
    },
    {
      id: 3,
      text: "정보를 받아들일 때 나는?",
      options: [
        { text: "실제 경험과 구체적인 사실을 중요하게 여긴다.", value: "S" },
        { text: "직관과 전체적인 맥락을 더 중요하게 생각한다.", value: "N" }
      ]
    },
    {
      id: 4,
      text: "문제를 해결할 때 나는?",
      options: [
        { text: "과거의 경험과 검증된 방법을 선호한다.", value: "S" },
        { text: "새로운 방식과 창의적인 해결책을 찾는다.", value: "N" }
      ]
    },
    {
      id: 5,
      text: "의사결정을 할 때 나는?",
      options: [
        { text: "객관적인 사실과 논리적인 분석을 중시한다.", value: "T" },
        { text: "사람들의 감정과 가치를 고려한다.", value: "F" }
      ]
    },
    {
      id: 6,
      text: "팀 프로젝트에서 갈등이 생겼을 때 나는?",
      options: [
        { text: "문제의 원인을 분석하고 효율적인 해결책을 찾는다.", value: "T" },
        { text: "팀원들의 감정을 고려하며 조화로운 해결책을 찾는다.", value: "F" }
      ]
    },
    {
      id: 7,
      text: "일상생활에서 나는?",
      options: [
        { text: "계획을 세우고 그대로 실행하는 것이 편하다.", value: "J" },
        { text: "상황에 따라 유연하게 계획을 변경한다.", value: "P" }
      ]
    },
    {
      id: 8,
      text: "주말 여행을 갈 때 나는?",
      options: [
        { text: "미리 일정과 숙소를 꼼꼼히 계획한다.", value: "J" },
        { text: "대략적인 방향만 정하고 즉흥적으로 결정한다.", value: "P" }
      ]
    },
    {
      id: 9,
      text: "스트레스 받을 때 나는?",
      options: [
        { text: "다른 사람들과 만나서 대화하며 해소한다.", value: "E" },
        { text: "혼자만의 시간을 가지며 재충전한다.", value: "I" }
      ]
    },
    {
      id: 10,
      text: "새로운 아이디어가 떠올랐을 때 나는?",
      options: [
        { text: "실현 가능성과 구체적인 실행 방법을 먼저 생각한다.", value: "S" },
        { text: "다양한 가능성과 미래의 발전 방향을 상상한다.", value: "N" }
      ]
    }
  ],

  results: {
    ISTJ: {
      title: "청렴결백한 논리주의자 (ISTJ)",
      description: "신중하고 체계적인 당신은 책임감이 강하고 현실적인 문제 해결사입니다.",
      traits: ["체계적", "신중함", "책임감", "현실적", "논리적"],
      details: [
        "당신은 매우 신중하고 체계적인 성격의 소유자입니다.",
        "정확성과 체계성을 중요시하며, 맡은 일은 끝까지 책임지고 완수합니다.",
        "전통과 질서를 중요하게 여기며, 규칙과 원칙을 잘 지킵니다.",
        "실용적이고 현실적인 해결책을 선호합니다."
      ],
      strengths: ["뛰어난 집중력", "높은 신뢰성", "체계적인 업무 처리", "현실적인 문제 해결 능력"],
      weaknesses: ["변화를 꺼림", "감정 표현이 서툼", "융통성이 부족할 수 있음"],
      careerPaths: ["회계사", "프로젝트 매니저", "품질 관리자", "시스템 분석가"]
    },
    ISFJ: {
      title: "용감한 수호자 (ISFJ)",
      description: "헌신적이고 따뜻한 당신은 타인을 보호하고 배려하는 수호천사입니다.",
      traits: ["헌신적", "배려심", "책임감", "인내심", "세심함"],
      details: [
        "당신은 다른 사람들의 필요를 잘 파악하고 세심하게 배려합니다.",
        "책임감이 강하며 맡은 일을 꾸준히 해내는 성실함이 있습니다.",
        "전통적인 가치를 중요시하며 안정성을 추구합니다.",
        "조용하고 겸손한 태도로 다른 사람들을 돕는 것을 좋아합니다."
      ],
      strengths: ["뛰어난 관찰력", "강한 책임감", "실용적인 문제해결", "따뜻한 배려심"],
      weaknesses: ["과도한 자기희생", "변화를 두려워함", "비판을 받아들이기 어려워함"],
      careerPaths: ["간호사", "초등학교 교사", "행정지원", "사회복지사"]
    },
    INFJ: {
      title: "선의의 옹호자 (INFJ)",
      description: "이상적이고 통찰력 있는 당신은 세상을 더 나은 곳으로 만들고자 하는 이상주의자입니다.",
      traits: ["통찰력", "이상주의", "창의성", "헌신적", "공감능력"],
      details: [
        "당신은 뛰어난 직관력으로 타인의 감정과 동기를 잘 이해합니다.",
        "강한 신념을 가지고 있으며 자신의 가치관에 따라 살아갑니다.",
        "복잡한 문제를 창의적으로 해결하는 능력이 있습니다.",
        "조용하지만 영향력 있게 다른 사람들을 이끕니다."
      ],
      strengths: ["뛰어난 통찰력", "강한 직관", "창의적 문제해결", "깊은 공감능력"],
      weaknesses: ["완벽주의 성향", "현실과 타협하기 어려움", "때로는 고집스러움"],
      careerPaths: ["상담사", "작가", "교육자", "예술치료사"]
    },
    INTJ: {
      title: "용의주도한 전략가 (INTJ)",
      description: "혁신적이고 독창적인 당신은 지적 호기심이 강하며 전략적 사고에 능한 전략가입니다.",
      traits: ["전략적", "독창성", "분석적", "독립적", "완벽주의"],
      details: [
        "당신은 복잡한 문제를 분석하고 해결하는 것을 즐깁니다.",
        "장기적인 비전을 가지고 전략적으로 계획을 세웁니다.",
        "독창적인 아이디어로 혁신적인 해결책을 제시합니다.",
        "지적 독립성을 중요시하며 자신의 신념에 따라 행동합니다."
      ],
      strengths: ["전략적 사고", "뛰어난 분석력", "독창적 문제해결", "높은 자기주도성"],
      weaknesses: ["지나친 완벽주의", "감정표현 부족", "때로는 고집스러움"],
      careerPaths: ["전략 컨설턴트", "과학자", "프로그래머", "투자분석가"]
    },
    ISTP: {
      title: "만능 재주꾼 (ISTP)",
      description: "대담하고 실용적인 당신은 문제 해결에 탁월한 능력을 가진 실용주의자입니다.",
      traits: ["적응력", "분석적", "실용적", "독립적", "모험심"],
      details: [
        "당신은 현재에 집중하며 실제적인 문제 해결을 즐깁니다.",
        "뛰어난 상황 적응력으로 위기에 강합니다.",
        "논리적 분석을 통해 효율적인 해결책을 찾아냅니다.",
        "자유롭고 독립적인 성향으로 자신만의 방식을 선호합니다."
      ],
      strengths: ["뛰어난 문제해결력", "침착한 위기대처", "실용적 접근", "높은 적응력"],
      weaknesses: ["약속과 규칙을 싫어함", "감정표현 부족", "때로는 무관심해 보일 수 있음"],
      careerPaths: ["엔지니어", "기술자", "파일럿", "법의학자"]
    },
    ISFP: {
      title: "호기심 많은 예술가 (ISFP)",
      description: "섬세하고 예술적인 당신은 따뜻한 감성과 창의성을 가진 예술가형 성격입니다.",
      traits: ["예술적", "감성적", "유연함", "온화함", "탐험적"],
      details: [
        "당신은 현재의 순간을 즐기며 감각적인 경험을 중요시합니다.",
        "자신만의 독특한 미적 감각과 창의성을 가지고 있습니다.",
        "다른 사람들의 감정에 민감하며 배려심이 깊습니다.",
        "자유로운 영혼으로 구속받는 것을 싫어합니다."
      ],
      strengths: ["뛰어난 미적 감각", "강한 공감능력", "유연한 적응력", "평화로운 성격"],
      weaknesses: ["장기 계획 수립이 어려움", "갈등 상황을 피하려 함", "쉽게 스트레스 받음"],
      careerPaths: ["예술가", "그래픽 디자이너", "음악가", "인테리어 디자이너"]
    },
    INFP: {
      title: "낭만적인 중재자 (INFP)",
      description: "이상적이고 창의적인 당신은 깊은 통찰력과 풍부한 상상력을 가진 몽상가입니다.",
      traits: ["이상주의", "창의성", "공감능력", "성실함", "개성적"],
      details: [
        "당신은 깊은 내면의 감정과 가치관을 중요시합니다.",
        "인간의 잠재력과 가능성을 믿으며 성장을 추구합니다.",
        "독특한 시각과 창의적인 표현력을 가지고 있습니다.",
        "진정성 있는 관계와 의미 있는 삶을 추구합니다."
      ],
      strengths: ["풍부한 상상력", "깊은 통찰력", "강한 공감능력", "창의적 문제해결"],
      weaknesses: ["현실감각 부족", "우유부단함", "과도한 자기비판"],
      careerPaths: ["작가", "심리상담사", "예술치료사", "번역가"]
    },
    INTP: {
      title: "논리적인 사색가 (INTP)",
      description: "혁신적이고 창의적인 당신은 끊임없이 새로운 지식을 추구하는 아이디어뱅크입니다.",
      traits: ["논리적", "창의적", "분석적", "객관적", "탐구적"],
      details: [
        "당신은 복잡한 이론과 아이디어를 탐구하는 것을 즐깁니다.",
        "논리적 분석을 통해 문제의 본질을 파악합니다.",
        "독창적인 해결책을 제시하는 능력이 뛰어납니다.",
        "지적 호기심이 강하며 새로운 지식 습득을 즐깁니다."
      ],
      strengths: ["뛰어난 분석력", "창의적 문제해결", "객관적 판단", "깊이 있는 지식"],
      weaknesses: ["실행력 부족", "사회성 부족", "완벽주의 성향"],
      careerPaths: ["연구원", "프로그래머", "철학자", "데이터 분석가"]
    },
    ESTP: {
      title: "모험을 즐기는 사업가 (ESTP)",
      description: "대담하고 현실적인 당신은 순발력 있게 문제를 해결하는 모험가입니다.",
      traits: ["모험심", "현실적", "적응력", "활동적", "순발력"],
      details: [
        "당신은 즉흥적이고 에너지 넘치는 행동파입니다.",
        "위기상황에서 뛰어난 문제해결 능력을 보여줍니다.",
        "현재의 순간을 즐기며 실제적인 경험을 중요시합니다.",
        "유연한 사고로 빠르게 상황에 적응합니다."
      ],
      strengths: ["뛰어난 위기대처", "실용적 문제해결", "높은 적응력", "활발한 성격"],
      weaknesses: ["장기계획 부족", "참을성 부족", "위험 감수 성향"],
      careerPaths: ["기업가", "세일즈맨", "스포츠 선수", "응급구조사"]
    },
    ESFP: {
      title: "자유로운 영혼의 연예인 (ESFP)",
      description: "밝고 열정적인 당신은 삶을 즐기며 다른 사람들에게 기쁨을 주는 엔터테이너입니다.",
      traits: ["열정적", "사교적", "낙천적", "즐거움", "자유로움"],
      details: [
        "당신은 현재의 순간을 즐기며 삶의 즐거움을 추구합니다.",
        "뛰어난 사교성으로 주변 사람들을 즐겁게 합니다.",
        "실용적이고 유연한 문제해결 방식을 선호합니다.",
        "spontaneous하고 에너지 넘치는 성격입니다."
      ],
      strengths: ["뛰어난 대인관계", "밝은 에너지", "유연한 적응력", "실용적 해결능력"],
      weaknesses: ["깊이 있는 계획 부족", "쉽게 지루해함", "장기집중 어려움"],
      careerPaths: ["엔터테이너", "이벤트 플래너", "판매직", "관광가이드"]
    },
    ENFP: {
      title: "재기발랄한 활동가 (ENFP)",
      description: "열정적이고 창의적인 당신은 가능성을 발견하고 새로운 시도를 즐기는 혁신가입니다.",
      traits: ["열정적", "창의적", "사교적", "낙관적", "공감능력"],
      details: [
        "당신은 새로운 가능성과 아이디어를 발견하는 것을 즐깁니다.",
        "다양한 사람들과의 관계를 통해 영감을 얻습니다.",
        "강한 직관력으로 다른 사람의 잠재력을 발견합니다.",
        "변화와 혁신을 추구하며 도전을 즐깁니다."
      ],
      strengths: ["뛰어난 창의력", "강한 공감능력", "열정적인 태도", "영감을 주는 리더십"],
      weaknesses: ["일상적인 업무에 지루함", "과도한 감정이입", "우선순위 설정 어려움"],
      careerPaths: ["마케터", "카피라이터", "교육자", "창업가"]
    },
    ENTP: {
      title: "논쟁을 즐기는 변론가 (ENTP)",
      description: "혁신적이고 독창적인 당신은 새로운 아이디어를 탐구하고 도전하는 것을 즐기는 발명가입니다.",
      traits: ["창의적", "논리적", "도전적", "유쾌함", "독창성"],
      details: [
        "당신은 새로운 관점과 가능성을 탐구하는 것을 즐깁니다.",
        "논리적 분석과 지적 도전을 추구합니다.",
        "기존의 틀을 깨는 혁신적인 아이디어를 제시합니다.",
        "다양한 관점에서 문제를 바라보고 해결책을 찾습니다."
      ],
      strengths: ["뛰어난 문제해결력", "창의적 사고", "적응력", "설득력"],
      weaknesses: ["일상적인 업무 기피", "끝맺음 부족", "논쟁적 성향"],
      careerPaths: ["기업가", "컨설턴트", "발명가", "변호사"]
    },
    ESTJ: {
      title: "엄격한 관리자 (ESTJ)",
      description: "체계적이고 실용적인 당신은 목표 달성을 위해 효율적으로 조직을 이끄는 관리자입니다.",
      traits: ["체계적", "실용적", "책임감", "효율성", "결단력"],
      details: [
        "당신은 명확한 규칙과 절차를 중요시합니다.",
        "효율적인 방식으로 목표를 달성하는 것을 선호합니다.",
        "책임감이 강하며 신뢰할 수 있는 리더십을 보여줍니다.",
        "실용적이고 현실적인 문제해결 방식을 선호합니다."
      ],
      strengths: ["뛰어난 조직력", "강한 책임감", "효율적인 업무처리", "명확한 의사소통"],
      weaknesses: ["융통성 부족", "감정적 공감 부족", "지나친 완벽주의"],
      careerPaths: ["관리자", "경영컨설턴트", "군인", "법률가"]
    },
    ESFJ: {
      title: "사교적인 외교관 (ESFJ)",
      description: "친절하고 배려심 깊은 당신은 다른 사람들을 돕고 화합을 이끄는 사회적 리더입니다.",
      traits: ["친절함", "배려심", "사교성", "책임감", "협동심"],
      details: [
        "당신은 다른 사람들의 필요를 잘 파악하고 도움을 줍니다.",
        "조화로운 관계와 안정적인 환경을 중요시합니다.",
        "책임감이 강하며 맡은 일을 성실히 수행합니다.",
        "전통과 사회적 가치를 중요하게 여깁니다."
      ],
      strengths: ["뛰어난 대인관계", "강한 책임감", "실용적 문제해결", "협력적 태도"],
      weaknesses: ["과도한 자기희생", "비판에 민감", "변화를 두려워함"],
      careerPaths: ["교사", "인사담당자", "간호사", "사회복지사"]
    },
    ENFJ: {
      title: "정의로운 사회운동가 (ENFJ)",
      description: "카리스마 있고 영감을 주는 당신은 다른 사람들의 성장을 돕고 긍정적인 변화를 이끄는 지도자입니다.",
      traits: ["카리스마", "이상주의", "공감능력", "책임감", "영감"],
      details: [
        "당신은 다른 사람들의 잠재력을 발견하고 성장을 돕습니다.",
        "강한 직관력으로 사람들을 이해하고 통찰력 있게 조언합니다.",
        "사회적 가치와 윤리를 중요시하며 정의를 추구합니다.",
        "열정적으로 팀을 이끌고 긍정적인 변화를 만듭니다."
      ],
      strengths: ["뛰어난 리더십", "강한 통찰력", "영감을 주는 능력", "조직력"],
      weaknesses: ["과도한 자기희생", "비판을 개인적으로 받아들임", "완벽주의"],
      careerPaths: ["상담사", "교육자", "인사관리자", "비영리단체 활동가"]
    },
    ENTJ: {
      title: "대담한 통솔자 (ENTJ)",
      description: "대담하고 결단력 있는 당신은 비전을 가지고 조직을 이끄는 전략적 리더입니다.",
      traits: ["리더십", "전략적", "결단력", "자신감", "추진력"],
      details: [
        "당신은 장기적인 비전을 가지고 전략적으로 계획을 수립합니다.",
        "논리적 분석을 통해 효율적인 해결책을 제시합니다.",
        "카리스마 있는 리더십으로 조직을 이끕니다.",
        "목표 달성을 위해 강한 추진력을 발휘합니다."
      ],
      strengths: ["뛰어난 리더십", "전략적 사고", "강한 추진력", "명확한 의사결정"],
      weaknesses: ["감정적 공감 부족", "지나친 통제욕", "참을성 부족"],
      careerPaths: ["최고경영자", "정치인", "경영컨설턴트", "기업가"]
    }

  },
  calculateResult: function(answers) {
    // 답변이 없는 경우 처리
    if (!answers || answers.length === 0) {
      return {
        type: 'ISTJ',
        ...this.results['ISTJ']
      };
    }

    const counts = {
      E: 0, I: 0,
      S: 0, N: 0,
      T: 0, F: 0,
      J: 0, P: 0
    };

    // 답변 집계 - answer.type으로 접근하도록 수정
    answers.forEach(answer => {
      if (answer && answer.type && answer.type in counts) {
        counts[answer.type]++;
      }
    });

    console.log('MBTI 점수:', counts); // 디버깅용

    // MBTI 유형 결정
    const type = [
      counts.E > counts.I ? 'E' : 'I',
      counts.S > counts.N ? 'S' : 'N',
      counts.T > counts.F ? 'T' : 'F',
      counts.J > counts.P ? 'J' : 'P'
    ].join('');

    console.log('계산된 MBTI:', type); // 디버깅용

    // 결과가 results에 없는 경우 ISTJ로 폴백
    if (!this.results[type]) {
      console.error('알 수 없는 MBTI 유형:', type);
      return {
        type: 'ISTJ',
        ...this.results['ISTJ']
      };
    }

    // 결과 객체 반환
    return {
      type,
      ...this.results[type]
    };
  }
}

);
